<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>سبحة الأذكار - Rachidchiha54</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Cairo:wght@600;900&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { 
            background-color: #064e3b; 
            /* خلفية مزخرفة قرآنية إسلامية أنيقة */
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MCIgaGVpZ2h0PSI4MCIgdmlld0JveD0iMCAwIDgwIDgwIj48ZyBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmZmZmYiIGZpbGwtb3BhY2l0eT0iMC4wNSI+PHBhdGggZD0iTTAgMGg0MHY0MEgwVjB6bTIwIDIwaDIwdjIwSDIWMjB6TTAgMjBoMjB2MjBIMFYyMHoyMCAwaDIwdjIwSDIwVjB6Ii8+PHBhdGggZD0iTTQwIDQwaDIwdjIwSDQWMDB6bTIwIDIwaDIwdjIwSDYwVjIwek00MCA2MGgyMHYyMEg0MFY2MHoyMCAwaDIwdjIwSDYwVjB6Ii8+PC9nPjwvZz48L3N2Zz4=');
            color: #fff; 
            text-align: center; 
            font-family: 'Cairo', sans-serif; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: flex-start;
            margin: 0; 
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        #zikr { 
            font-family: 'Amiri', serif;
            font-size: 38px; 
            color: #f1c40f; 
            text-shadow: 0 0 20px rgba(241, 196, 15, 0.5);
            margin-top: 90px;
            min-height: 80px;
            padding: 0 20px;
        }

        #counter { 
            font-size: 85px; 
            font-weight: 900;
            color: #ffffff;
            margin-top: 15px;
            transition: all 0.2s ease;
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.4), 2px 2px 5px rgba(0,0,0,0.5);
        }

        .main-area {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            margin-top: 30px; 
        }

        .bead { 
            width: 165px; 
            height: 165px; 
            background: radial-gradient(circle, #ffffff 0%, #e0e0e0 100%); 
            border-radius: 50%; 
            border: 10px solid #059669;
            box-shadow: 0 10px 25px rgba(0,0,0,0.4), inset 0 -5px 10px rgba(0,0,0,0.1); 
            cursor: pointer; 
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.05s;
        }

        .bead:active { transform: scale(0.94); }
        .bead span { color: #064e3b; font-weight: 900; font-size: 24px; }

        .reset-icon-btn {
            position: absolute;
            right: 15%;
            bottom: -5px;
            width: 48px;
            height: 48px;
            background: rgba(231, 76, 60, 0.9);
            border: 2px solid #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            cursor: pointer;
        }
        .reset-icon-btn::after { content: "↻"; color: white; font-size: 22px; }

        /* تعديل التوقيع: رفعه للأعلى قليلاً وتغيير شكل الكتابة */
        .signature {
            font-family: 'Cairo', sans-serif; /* تغيير الخط إلى Cairo */
            font-size: 16px; /* تكبير الخط قليلاً */
            font-weight: 700; /* جعل الخط عريضاً */
            color: rgba(255, 255, 255, 0.8); /* زيادة الوضوح */
            position: absolute;
            bottom: 60px; /* رفعه للأعلى قليلاً (كان 30px) */
            letter-spacing: 1px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.4);
        }
    </style>
</head>
<body onclick="handleGlobalClick()">

    <div id="zikr">الله أكبر ولله الحمد</div>
    <div id="counter">0</div>

    <div class="main-area">
        <div class="bead"><span>سبح</span></div>
        <div class="reset-icon-btn" onclick="resetCount(event)"></div>
    </div>

    <div class="signature">Rachidchiha54</div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let count = parseInt(localStorage.getItem('sebhaCount')) || 0;
        const zikrs = ["الله أكبر ولله الحمد", "سبحان الله", "الحمدلله", "لاإله إلا الله"];
        document.getElementById('counter').innerText = count;
        updateZikr();

        function vibrateDevice(type) {
            try {
                if (type === 'reset') {
                    tg.HapticFeedback.notificationOccurred('warning');
                } else {
                    tg.HapticFeedback.impactOccurred('medium');
                }
            } catch (e) { console.log("Telegram Haptic failed"); }

            if (navigator.vibrate) {
                if (type === 'reset') {
                    navigator.vibrate([100, 50, 100]);
                } else {
                    navigator.vibrate(40);
                }
            }
        }

        function handleGlobalClick() {
            count++;
            localStorage.setItem('sebhaCount', count);
            const counterElem = document.getElementById('counter');
            counterElem.innerText = count;
            counterElem.style.transform = "scale(1.08)";
            setTimeout(() => counterElem.style.transform = "scale(1)", 100);
            
            if (count % 33 === 0) updateZikr();
            
            vibrateDevice('tap');
        }

        function updateZikr() {
            let index = Math.floor(count / 33) % zikrs.length;
            document.getElementById('zikr').innerText = zikrs[index];
        }

        function resetCount(event) {
            event.stopPropagation();
            count = 0;
            localStorage.setItem('sebhaCount', 0);
            const counterElem = document.getElementById('counter');
            
            counterElem.style.opacity = "0";
            setTimeout(() => {
                counterElem.innerText = "0";
                counterElem.style.opacity = "1";
                updateZikr();
            }, 150);

            vibrateDevice('reset');
        }
    </script>
</body>
</html>
